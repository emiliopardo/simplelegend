<!DOCTYPE html>
<html>

<head>
    <title>Ejemplo simpleLegend</title>
    <!-- fichero estilos -->
    <link href="https://mapea4-sigc.juntadeandalucia.es/assets/css/mapea-6.0.0.ol.min.css" rel="stylesheet" />

    <!-- ficheros javascript -->
    <script type="text/javascript" src="https://mapea4-sigc.juntadeandalucia.es/js/mapea-6.0.0.ol.min.js"></script>
    <script type="text/javascript" src="https://mapea4-sigc.juntadeandalucia.es/js/configuration-6.0.0.js"></script>

    <!-- Plugin simplebaselayerselector-->
    <script type="text/javascript" src="https://emiliopardo.github.io/simplelegend/simplelegend.ol.min.js"></script>
    <link href="https://emiliopardo.github.io/simplelegend/simplelegend.ol.min.css" rel="stylesheet" />


    <style>
        html,
        body,
        #map {
            padding: 0;
            margin: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
</body>
<script type="text/javascript">

    const map = M.map({
        container: 'map',
    });
    map.addControls(['ScaleLine', 'Scale', 'Mouse', 'panzoombar', 'layerSwitcher']);


    let layer = new M.layer.WMS({
        url: 'http://www.juntadeandalucia.es/institutodeestadisticaycartografia/geoserver-ieca/direst/wms?',
        name: 'direst_comercio_2018',
        legend: 'Sector Comercio',
        transparent: true
    }, {
        params: {
            styles: 'direst_comercio',
            layers: 'direst_comercio_2018',
        }
    });
    map.addLayers([layer]);

    const configSimpleLegend = {
        title: 'Leyenda',
        draggable: true,
        layers: [layer
        ]

    }

    const mp = new M.plugin.Simplelegend(configSimpleLegend);

    map.addPlugin(mp);

</script>

</html>